<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Census Data Analysis Tool</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/results.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!-- Add Chart.js -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <div class="app-wrapper">
        <header class="header">
            <div class="header-content">
                <div class="header-left">
                    <h1>Census Data Analysis Tool</h1>
                </div>
                <div class="header-right">
                    <div id="connection-status" class="connection-status">
                        <i class="fas fa-plug"></i> Not Connected
                    </div>
                </div>
            </div>
        </header>

        <div class="main-content">
            <div class="sidebar">
                <div class="sidebar-header">
                    <h2>Database Operations</h2>
                </div>
                <div class="sidebar-content">
                    <div class="user-panel">
                        <h3>User Information</h3>
                        <div id="user-info" class="user-info">
                            Loading...
                        </div>
                        <button id="logout-button" class="btn btn-secondary logout-button">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                    <div class="procedures-menu">
                        <h3>Available Procedures</h3>
                        <ul id="procedure-list">
                            <li data-procedure="sp_AnalyzeStoreLocationPotential">
                                <i class="fas fa-store"></i> Store Location Analysis
                            </li>
                            <li data-procedure="sp_AssessHousingAffordability">
                                <i class="fas fa-home"></i> Housing Affordability
                            </li>
                            <li data-procedure="sp_ExportCensusDataForHealthStudy">
                                <i class="fas fa-file-export"></i> Export Health Data
                            </li>
                            <li data-procedure="sp_GetYearlyPopulationTrends">
                                <i class="fas fa-chart-line"></i> Population Trends
                            </li>
                            <li data-procedure="sp_IdentifyHighPovertyAreas">
                                <i class="fas fa-hand-holding-usd"></i> High Poverty Areas
                            </li>
                            <li data-procedure="sp_IdentifyLowCoverageParishes">
                                <i class="fas fa-heart"></i> Low Insurance Coverage
                            </li>
                            <li data-procedure="sp_IdentifyTransportGaps">
                                <i class="fas fa-bus"></i> Transportation Gaps
                            </li>
                            <li data-procedure="sp_IdentifyUnderinsuredPopulations">
                                <i class="fas fa-wheelchair"></i> Underinsured Populations
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="content-area">
                <!-- Same procedure panels as before -->
                <!-- All the procedure panels remain unchanged -->
                <!-- ... Original procedure panels from the first solution ... -->
                <!-- Visualization Section -->
                <div class="visualization-panel">
                    <h2>Data Visualization</h2>
                    <div class="visualization-controls">
                        <label for="procedure-select">Select Procedure:</label>
                        <select id="procedure-select">
                            <option value="sp_IdentifyHighPovertyAreas">High Poverty Areas</option>
                            <option value="sp_IdentifyLowCoverageParishes">Low Insurance Coverage</option>
                            <option value="sp_AnalyzeStoreLocationPotential">Store Location Analysis</option>
                            <option value="sp_ExportCensusDataForHealthStudy">Export Health Data</option>
                            <option value="sp_GetYearlyPopulationTrends">Population Trends</option>
                            <option value="sp_IdentifyTransportGaps">Transportation Gaps</option>
                            <option value="sp_AssessHousingAffordability">Housing Affordability</option>
                            <option value="sp_IdentifyUnderinsuredPopulations">Underinsured Populations</option>
                        </select>

                        <label for="year-select">Select Year:</label>
                        <select id="year-select">
                            <option value="2012">2012</option>
                            <option value="2013">2013</option>
                            <option value="2014">2014</option>
                            <option value="2015">2015</option>
                        </select>

                        <button id="generate-chart" class="btn btn-primary">Generate Chart</button>
                    </div>
                    <canvas id="dataChart" width="400" height="200"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification system -->
    <div class="notification-container" id="notification-container"></div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="spinner"></div>
        <p>Processing request...</p>
    </div>

    <!-- Scripts -->
    <script src="js/connection.js"></script>
    <script src="js/procedures.js"></script>
    <script src="js/results.js"></script>
    <script src="js/visualization.js"></script> <!-- Add visualization script -->
</body>

</html>